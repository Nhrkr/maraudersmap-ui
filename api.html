<!doctype html>

<html>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<body>
	<h1>API test</h1>
<script>

// api code

var Api = {
	getPositions: function (cb) {
		$.get('/api/positions/')
			.success(function (json) { cb(0, json); }).error(function (err) { cb(err, null); })	
	},

	getUser: function (username, cb) {
		$.get('/api/users/' + username)
			.success(function (json) { cb(0, json); }).error(function (err) { cb(err, null); })	
	}
}

// testing code

function results(heading) {
	var pre = document.createElement('pre')
	var h3 = document.createElement('h3')
	h3.innerHTML = heading
	document.body.appendChild(h3)
	document.body.appendChild(pre)
	return pre
}

(function () {
	var posRes = results('Current positions')
	Api.getPositions(function (err, json) {
		$(posRes).text(JSON.stringify(json))
	})
})();

(function () {
	var posRes = results('User jceipek')
	Api.getUser('jceipek', function (err, json) {
		$(posRes).text(JSON.stringify(json))
	})
})();

</script>
</body>
</html>